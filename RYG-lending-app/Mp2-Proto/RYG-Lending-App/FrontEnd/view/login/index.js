let collectors = [

    {
        name: 'Collector 1',
        customers: [
            {
                id: 23021469,
                loanId: '123',
                name: 'Summer Season',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/owner.jpg'
            },
            {
                id: 23021469,
                loanId: '123',
                name: 'Summer Season',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/owner.jpg'
            },

            {
                id: 23021469,
                loanId: '123',
                name: 'Summer Season',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/owner.jpg'
            },

            {
                id: 23100201,
                loanId: '123',
                name: 'John Rondina',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                totalPayments: 0,
                totalPayable: 30000,
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/lloydProfile.jpg'
            },

            {
                id: 23021469,
                loanId: '123',
                name: 'Summer Season',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/owner.jpg'
            },


            {
                id: 23032903,
                loanId: '123',
                name: 'May Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23032903,
                loanId: '123',
                name: 'May Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23032903,
                loanId: '123',
                name: 'May Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23032903,
                loanId: '123',
                name: 'May Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23032903,
                loanId: '123',
                name: 'May Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23092510,
                loanId: '123',
                name: 'Beth Eller',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/lynlynPic.jpg'
            },

            {
                id: 23061022,
                loanId: '123',
                name: 'April Eller',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },
        ]
    },

    {
        name: 'Collector 2',
        customers: [
            {
                id: 23010505,
                loanId: '123',
                name: 'Julie Vegerano',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23081812,
                loanId: '123',
                name: 'Ben Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                totalPayments: 10000,
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },

            {
                id: 23032903,
                loanId: '123',
                name: 'May Fin',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/cjProfile.jpg'
            },
        ]
    },

    {
        name: 'Collector 3',
        customers: [
            {
                id: 23042211,
                loanId: '123',
                name: 'Ketty Perry',
                spouseName: 'John Rondina',
                birthDate: '2020-01-01',
                cusEmail: 'ychag@example.com',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                cusArea: 'Area 1',
                userPicture: 'images/owner.jpg',
                userDocs: 'images/owner.jpg',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                loanDate: '2020-01-01',
                loanDueDate: '2020-02-01',
                totalPayable: 35000,
                totalPayments: 10000,
                assignedCollector: 'none',
                paymentHistory: [
                    {
                        date: '2020-01-01',
                        paymentAmount: 1000
                    }
                ],
                loanHistory: [
                    {
                        loanId: '123',
                        loanDate: '2020-01-01',
                        loanAmount: 30000,
                        totalPayable: 35000,
                        loanDueDate: '2020-02-01',
                        loanStatus: 'Pending'
                    }
                ]
            },

            {
                id: 23021469,
                loanId: '123',
                name: 'Summer Season',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/owner.jpg'
            },

            {
                id: 23121801,
                loanId: '123',
                name: 'Franky D Luffy',
                loanAmount: 30000,
                loanTerm: 60,
                loanType: 'Regular Loan',
                contact: '09915305011',
                brgy: 'Malibay',
                municipality: 'Zambales',
                userPicture: 'images/owner.jpg'
            },
        ]
    }
];




const collector1Data = collectors.find(collector => collector.name === 'Collector 1');
const accordion_2 = document.getElementById('accordion_2');
const accordionBody2 = document.getElementById('accordionBody2');

if (collector1Data) {
    const collectorHeading = document.createElement('h2');
    collectorHeading.textContent = collector1Data.name;

    // Create the table and set its attributes
    const table = document.createElement('table');
    table.classList.add('table', 'table-bordered', 'table-responsive');
    table.id = 'customer-table';

    // Create the table header
    const tableHeader = document.createElement('thead');
    tableHeader.classList.add('table-light');
    const headerRow = document.createElement('tr');
    const nameHeader = document.createElement('th');
    nameHeader.textContent = 'Name';
    const addressHeader = document.createElement('th');
    addressHeader.textContent = 'Address';
    const actionHeader = document.createElement('th');
    actionHeader.textContent = 'Action';
    headerRow.appendChild(nameHeader);
    headerRow.appendChild(addressHeader);
    headerRow.appendChild(actionHeader);
    tableHeader.appendChild(headerRow);


    const tableBody = document.createElement('tbody');

    collector1Data.customers.forEach(customer => {
        const row = document.createElement('tr');

        const nameCell = document.createElement('td');
        nameCell.textContent = customer.name;

        const loanAmountCell = document.createElement('td');
        loanAmountCell.textContent = customer.cusArea + ' ' + customer.brgy + ' ' + customer.municipality;

        const actionCell = document.createElement('td');
        actionCell.style.cssText = 'display: flex; align-items: center; justify-content: center '
        const payButton = document.createElement('button');
        payButton.textContent = 'PAY';
        payButton.classList.add('btn', 'btn-primary', 'pay-button', 'p-1');
        payButton.style.cssText = 'font-size: 8px; background-color: ; color: white;';
        payButton.addEventListener('click', () => {
            const modal = new bootstrap.Modal(document.getElementById('paymentModal'));
            const confirmPaymentButton = document.getElementById('confirmPayment');
            const paymentAmountInput = document.getElementById('paymentAmount');

            document.querySelector('#paymentModal .modal-title').textContent = `Payment for ${customer.name}`;

            paymentAmountInput.value = '';
            paymentAmountInput.dataset.customerId = customer.id;

            confirmPaymentButton.addEventListener('click', () => {
                const customerId = paymentAmountInput.dataset.customerId;
                const amount = parseFloat(paymentAmountInput.value);

                modal.hide();
            });


            modal.show();
        });

        const viewButton = document.createElement('button');
        viewButton.textContent = 'Details';
        viewButton.classList.add('btn', 'view-button', 'p-1', 'mx-1');
        viewButton.style.cssText = 'font-size: 8px; background-color: #00307d; color: white;';
        viewButton.addEventListener('click', () => {
            displayCustomerDetails(customer);
        });

        actionCell.appendChild(payButton);
        actionCell.appendChild(viewButton);

        row.appendChild(nameCell);
        row.appendChild(loanAmountCell);
        row.appendChild(actionCell);

        tableBody.appendChild(row);

    });

    table.appendChild(tableHeader);
    table.appendChild(tableBody);

    accordion_2.appendChild(collectorHeading);
    accordionBody2.appendChild(table);
} else {
    accordionBody2.textContent = 'Data is Empty!';
}


const viewButtons = document.querySelectorAll('.view-button');
const customerDetailsModal = new bootstrap.Modal(document.getElementById('customerDetailsModal'));
const customerDetailsContent = document.getElementById('customerDetailsContent');

viewButtons.forEach(viewButton => {
    viewButton.addEventListener('click', (event) => {
        // Find the corresponding customer object by data-customer-id
        const customerId = event.currentTarget.closest('tr').dataset.customerId;
        const customer = collector1Data.customers.find(cust => cust.id === customerId);

        customerDetailsContent.innerHTML = `
      <h4>${customer.name}</h4>
      <p>Loan Amount: ${customer.loanAmount}</p>
      <p>Loan Term: ${customer.loanTerm} months</p>
      <!-- Add more customer details as needed -->
    `;
        customerDetailsModal.show();
    });
});

function displayCustomerDetails(customer) {
    const customerDetailsModal = new bootstrap.Modal(document.getElementById('customerDetailsModal'));
    const customerDetailsContent = document.getElementById('customerDetailsContent');

    // Populate customer details inside the modal
    customerDetailsContent.innerHTML = `
    <div class="details-container" style="display: flex; flex-direction: column; align-items: start;">
        <h4 class="card-title">${customer.name}</h4>
        <span class="details-title">Loan Amount:</span> <span>${customer.loanAmount}</span>
        <span class="details-title">Loan Term:</span> <span>${customer.loanTerm}</span>
        <span class="details-title">Loan Type:</span> <span>${customer.loanType}</span>
        <span class="details-title">Contact:</span> <span>${customer.contact}</span>
        <span class="details-title">Brgy:</span> <span>${customer.brgy}</span>
        <span class="details-title">Municipality:</span> <span>${customer.municipality}</span>
        <span class="details-title">Loan Type:</span> <span>${customer.loanType}</span>
    </div>
`;

    customerDetailsModal.show();
}


// Payment
